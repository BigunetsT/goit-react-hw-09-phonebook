import React, { Component } from 'react';
import { connect } from 'react-redux';
import PropTypes from 'prop-types';
import Modal from '../Modal';
import UpdateContact from '../UpdateContact';
import { contactsOperations } from '../../redux/contacts';
import styles from './ContactItem.module.scss';

class ContactItem extends Component {
  state = {
    showModal: false,
  };
  openModal = () => {
    this.setState({ showModal: true });
  };
  closeModal = () => {
    this.setState({ showModal: false });
  };

  render() {
    const { id, name, number, onDelete } = this.props;
    const { showModal } = this.state;
    return (
      <li name={name} number={number} className={styles.contactItem}>
        <div className={styles.contactData}>
          <svg
            className={styles.img}
            id="Capa_1"
            enableBackground="new 0 0 512 512"
            height="30"
            viewBox="0 0 512 512"
            width="30"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g>
              <circle cx="255.997" cy="255.997" fill="#fd9468" r="255.997" />
              <path
                d="m512 255.997c0 141.381-114.622 256.003-256.003 256.003-42.346 0-82.285-10.278-117.471-28.488 30.597 12.922 64.24 20.072 99.549 20.072 141.381 0 255.992-114.621 255.992-256.002 0-99.076-56.277-185.003-138.614-227.555 91.978 38.827 156.547 129.857 156.547 235.97z"
                fill="#fe7d43"
              />
              <circle cx="255.997" cy="255.997" fill="#f9f3f1" r="212.835" />
              <path
                d="m468.83 255.997c0 117.543-95.29 212.833-212.833 212.833-32.264 0-62.851-7.181-90.259-20.031 21.225 7.109 43.951 10.957 67.573 10.957 117.553 0 212.843-95.29 212.843-212.833 0-85.279-50.155-158.84-122.585-192.802 84.417 28.242 145.261 107.955 145.261 201.876z"
                fill="#efe2dd"
              />
              <path
                d="m226.382 144.985c-15.039-23.199-35.383-41.206-63.445-23.299-15.673 10.002-27.089 25.962-33.236 43.509-13.068 37.303-6.857 77.233 10.736 111.934 21.676 42.754 59.049 81.69 101.112 104.661 46.325 25.298 92.168 20.165 131.372-15.177 16.568-14.936 24.524-40.862 4.519-56.948-16.476-13.248-41.545-33.756-63.268-19.57-14.952 9.765-19.618 26.154-39.359 27.515-33.757 2.327-69.626-50.132-74.033-79.392-1.366-9.075 1.105-16.973 6.538-24.209 5.695-7.585 12.534-9.481 19.286-14.745 16.056-12.519 11.979-35.457-.222-54.279z"
                fill="#fd9468"
              />
              <path
                d="m372.923 366.617c-39.208 35.34-85.053 40.474-131.371 15.175-42.069-22.974-79.436-61.904-101.113-104.662-13.118-25.865-19.908-54.631-17.099-83.057 1.883 19.753 7.953 39.208 17.099 57.233 21.677 42.758 59.044 81.689 101.113 104.662 46.318 25.299 92.162 20.165 131.371-15.175 6.019-5.432 10.895-12.305 13.714-19.63 6.997 15.206-.699 33.715-13.714 45.454z"
                fill="#fe7d43"
              />
            </g>
          </svg>
          <span className={styles.name}>{name} :</span>
          <span className={styles.phoneNumber}>{number}</span>
        </div>
        <div className={styles.contactOperations}>
          <button
            type="button"
            className={styles.contactBtn}
            onClick={() => onDelete(id)}
          >
            Видалити
            <svg
              className={styles.svg}
              id="Capa_1"
              enableBackground="new 0 0 512 512"
              height="20"
              viewBox="0 0 512 512"
              width="20"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g>
                <path d="m256 441.142c8.284 0 15-6.716 15-15v-201.409c0-8.284-6.716-15-15-15s-15 6.716-15 15v201.409c0 8.284 6.716 15 15 15z" />
                <path d="m173.412 427.552c.78 8.263 8.115 14.303 16.344 13.523 8.248-.779 14.302-8.096 13.523-16.344l-19.018-201.409c-.779-8.247-8.083-14.303-16.344-13.523-8.248.779-14.302 8.096-13.523 16.344z" />
                <path d="m322.244 441.076c8.238.779 15.564-5.269 16.344-13.523l19.018-201.409c.779-8.248-5.276-15.565-13.523-16.344-8.26-.784-15.565 5.276-16.344 13.523l-19.018 201.409c-.779 8.247 5.276 15.565 13.523 16.344z" />
                <path d="m57.646 168.875h8.967l43.448 330.083c.982 7.463 7.344 13.042 14.872 13.042h262.135c7.528 0 13.889-5.579 14.872-13.042l43.448-330.083h8.967c8.284 0 15-6.716 15-15v-65.629c0-8.284-6.716-15-15-15h-128.357v-5.911c0-37.128-30.207-67.335-67.335-67.335h-5.325c-37.128 0-67.335 30.207-67.335 67.335v5.911h-128.357c-8.284 0-15 6.716-15 15v65.629c0 8.284 6.715 15 15 15zm316.267 313.125h-235.826l-41.215-313.125h318.257zm-157.911-414.665c0-20.586 16.749-37.335 37.335-37.335h5.325c20.586 0 37.335 16.749 37.335 37.335v5.911h-79.995zm-143.356 35.911h366.709v35.629c-3.207 0-362.709 0-366.709 0z" />
              </g>
            </svg>
          </button>
          <button
            type="button"
            className={styles.contactBtn}
            onClick={() => this.openModal()}
          >
            Редагувати
            <svg
              className={styles.svg}
              height="20"
              viewBox="0 -1 381.53417 381"
              width="20"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="m370.589844 230.964844c-5.523438 0-10 4.476562-10 10v88.792968c-.019532 16.558594-13.4375 29.980469-30 30h-280.589844c-16.5625-.019531-29.980469-13.441406-30-30v-260.589843c.019531-16.5625 13.4375-29.980469 30-30h88.789062c5.523438 0 10-4.476563 10-10 0-5.523438-4.476562-10-10-10h-88.789062c-27.601562.03125-49.96875 22.398437-50 50v260.589843c.03125 27.601563 22.398438 49.96875 50 50h280.589844c27.601562-.03125 49.96875-22.398437 50-50v-88.789062c0-5.523438-4.476563-10.003906-10-10.003906zm0 0" />
              <path d="m156.367188 178.34375 146.011718-146.015625 47.089844 47.089844-146.011719 146.015625zm0 0" />
              <path d="m132.542969 249.257812 52.039062-14.414062-37.625-37.625zm0 0" />
              <path d="m362.488281 7.578125c-9.769531-9.746094-25.585937-9.746094-35.355469 0l-10.605468 10.605469 47.089844 47.089844 10.605468-10.605469c9.75-9.769531 9.75-25.585938 0-35.355469zm0 0" />
            </svg>
          </button>
          {showModal && (
            <Modal onClose={this.closeModal}>
              <UpdateContact name={name} number={number} id={id} />
            </Modal>
          )}
        </div>
      </li>
    );
  }
}

ContactItem.propTypes = {
  name: PropTypes.string.isRequired,
  number: PropTypes.string.isRequired,
  onDelete: PropTypes.func,
  onUpdate: PropTypes.func,
};
const mapDispatchToProps = dispatch => ({
  onDelete: id => dispatch(contactsOperations.deleteContact(id)),
});
export default connect(null, mapDispatchToProps)(ContactItem);
